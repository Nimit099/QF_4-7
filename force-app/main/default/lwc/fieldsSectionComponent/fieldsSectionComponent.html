<template>
    <c-errorpopup></c-errorpopup>
    <div class="toglling hideTabs" id="demo">
                
        <div class="fieldname">
            <p><b>FIELDS</b></p>
        </div>
        
        <template if:true={spinner1}>
            <div id="spinnerId" class="slds-spinner_container">
                <div class="slds-spinner--brand  slds-spinner slds-spinner--large slds-is-relative" role="alert">
                    <span class="slds-assistive-text">Loading...</span>
                    <div class="slds-spinner__dot-a"></div>
                    <div class="slds-spinner__dot-b"></div>
                </div>
            </div>
        </template>

        <template if:true={notShowField}>
            <div class="Accord">
                <lightning-accordion class="slds-scrollable_y" active-section-name="A" allow-multiple-sections-open>
                    <template if:true={hasMainObj}>
                        <lightning-accordion-section name="A" label={ObjectName1}>
                            <div ondragend={onDragOver}>
                                <template for:each={accfields} for:item="items">                                    
                                    <div draggable="true" ondragstart={onDragStart} key={items.Label}
                                        data-record={items.Label} data-type={items.Type} data-name={obj1st} data-form-id={formid} data-random-str={randomstr}
                                        class=" slds-box_xx-small fieldOutlines isSelected">
                                        <lightning-icon class="icon" icon-name={objectoneicon} title={ObjectName1}
                                            size="small"> </lightning-icon> {items.Label}
                                    </div>
                                </template>
                            </div>
                        </lightning-accordion-section>
                    </template>

                    <template if:true={hasFirstChild}>
                        <lightning-accordion-section name="B" label={ObjectName2}>
                            <div ondragend={onDragOver}>
                                <template for:each={confields} for:item="items">                                    
                                    <div draggable="true" ondragstart={onDragStart} key={items.Label}
                                        data-record={items.Label} data-type={items.Type} data-name={obj2nd} data-form-id={formid} data-random-str={randomstr}
                                        class="slds-box_xx-small fieldOutlines isSelected">
                                        <lightning-icon class="icon" icon-name={objecttwoicon} title={ObjectName2}
                                            size="small"></lightning-icon> {items.Label}
                                    </div>
                                </template>
                            </div>
                        </lightning-accordion-section>
                    </template>

                    <template if:true={hasSecondChild}>
                        <lightning-accordion-section name="C" label={ObjectName3}>
                            <div ondragend={onDragOver}>
                                <template for:each={oppfields} for:item="items">                                    
                                    <div draggable="true" ondragstart={onDragStart} key={items.Label}
                                        data-record={items.Label} data-type={items.Type} data-name={obj3rd} data-form-id={formid} data-random-str={randomstr}
                                        class="slds-box_xx-small fieldOutlines isSelected">
                                        <lightning-icon class="icon" icon-name={objectthreeicon} title={ObjectName1}
                                            size="small"></lightning-icon> {items.Label}
                                    </div>
                                </template>
                            </div>
                        </lightning-accordion-section>
                    </template>

                    <lightning-accordion-section name="D" label="Other Fields">
                        <lightning-accordion active-section-name="A" allow-multiple-sections-open
                            class="slds-scrollable_y">
                            <lightning-accordion-section name="A" label="Contact Details">
                                <div ondragend={onDragOver} ondrop={MethodForOpacity}>
                                    <template for:each={ContactDetailes} for:item="bf">
                                        <div class="example-draggable" key={bf.sequence__c}

                                            data-record={bf.DataRecord__c} data-type="Extra" draggable="true" data-form-id={formid} data-random-str={randomstr}
                                            ondragstart={onDragStart}>
                                            <c-quickformfieldcomponent t-view={bf.DataRecord__c}
                                                compview="Field"></c-quickformfieldcomponent>
                                        </div>
                                    </template>
                                </div>
                            </lightning-accordion-section>

                            <lightning-accordion-section name="B" label="Essentials">
                                <div ondragend={onDragOver} ondrop={MethodForOpacity}>
                                    <template for:each={Essential} for:item="bf">
                                        <div class="example-draggable" data-record={bf.DataRecord__c}  data-form-id={formid} data-random-str={randomstr}
                                            key={bf.sequence__c} data-type="Extra" draggable="true"
                                            ondragstart={onDragStart}>
                                            <c-quickformfieldcomponent t-view={bf.DataRecord__c}
                                                compview="Field"></c-quickformfieldcomponent>
                                        </div>
                                    </template>
                                </div>
                            </lightning-accordion-section>

                            <lightning-accordion-section name="C" label="Upload and Consent">
                                <div ondragend={onDragOver} ondrop={MethodForOpacity}>
                                    <template for:each={UploadandConsent} for:item="bf">
                                        <div class="example-draggable" data-record={bf.DataRecord__c} data-type="Extra" data-form-id={formid} data-random-str={randomstr}
                                            key={bf.sequence__c} draggable="true" ondragstart={onDragStart}>
                                            <c-quickformfieldcomponent t-view={bf.DataRecord__c}
                                                compview="Field"></c-quickformfieldcomponent>
                                        </div>
                                    </template>
                                </div>
                            </lightning-accordion-section>

                            <lightning-accordion-section name="D" label="Date and Time">
                                <div ondragend={onDragOver} ondrop={MethodForOpacity}>
                                    <template for:each={DateandTime} for:item="bf">
                                        <div class="example-draggable" data-record={bf.DataRecord__c} data-form-id={formid} data-random-str={randomstr}
                                            key={bf.sequence__c} draggable="true" data-type="Extra"
                                            ondragstart={onDragStart}>
                                            <c-quickformfieldcomponent t-view={bf.DataRecord__c}
                                                compview="Field"></c-quickformfieldcomponent>
                                        </div>
                                    </template>
                                </div>
                            </lightning-accordion-section>

                            <lightning-accordion-section name="E" label="Rating">
                                <div ondragend={onDragOver} ondrop={MethodForOpacity}>
                                    <template for:each={Rating} for:item="bf">
                                        <div class="example-draggable" data-record={bf.DataRecord__c} data-form-id={formid} data-random-str={randomstr}
                                            key={bf.sequence__c} data-type="Extra" draggable="true"
                                            ondragstart={onDragStart}>
                                            <c-quickformfieldcomponent t-view={bf.DataRecord__c}
                                                compview="Field"></c-quickformfieldcomponent>
                                        </div>
                                    </template>
                                </div>
                            </lightning-accordion-section>
                        </lightning-accordion>
                    </lightning-accordion-section>

                </lightning-accordion>
            </div>
        </template>
        
    </div>
</template>